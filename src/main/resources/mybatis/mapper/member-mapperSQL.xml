<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
	 <select id="selectLoginMember" parameterType="member" resultType="member">
      SELECT
          user_No as userNo,
         user_Id as userId,
         user_Pwd as userPwd,
         user_Name as userName,
         user_Email as userEmail,
         gender as gender,
         nickname as nickname,
         enroll_Date as enrollDate,
         roll as roll,
         end_YN as endYN
      FROM
         member
      WHERE user_Id = #{userId} and user_Pwd = #{userPwd} and end_yn='N'
      
   </select>
   
    <insert id="insertMember" parameterType="member">
      INSERT INTO
         MEMBER
      VALUES (MEMBER_SEQ.NEXTVAL, #{userId}, #{userPwd}, #{userName}, #{userEmail}, #{gender},#{nickname}, DEFAULT, DEFAULT, 'N')
   </insert>
	
	
	 <select id="findId" parameterType="member" resultType="member">
   		SELECT
   		 user_No as userNo,
         user_Id as userId,
         user_Pwd as userPwd,
         user_Name as userName,
         user_Email as userEmail,
         gender as gender,
         nickname as nickname,
         enroll_Date as enrollDate,
         roll as roll,
         end_YN as endYN
   		from
   		 MEMBER
   		 	where user_name=#{userName} and user_Email=#{userEmail} and end_yn='N'
   
   </select>
   
   <select id="IdCheck" resultType="member">
   	SELECT
   		 user_No as userNo,
         user_Id as userId,
         user_Pwd as userPwd,
         user_Name as userName,
         user_Email as userEmail,
         gender as gender,
         nickname as nickname,
         enroll_Date as enrollDate,
         roll as roll,
         end_YN as endYN
   		from
   		 MEMBER
   		WHERE USER_ID= #{value}
   </select>
   
   <select id="nicknameCheck" resultType="member">
   SELECT
   		 user_No as userNo,
         user_Id as userId,
         user_Pwd as userPwd,
         user_Name as userName,
         user_Email as userEmail,
         gender as gender,
         nickname as nickname,
         enroll_Date as enrollDate,
         roll as roll,
         end_YN as endYN
   		from
   		 MEMBER
   		WHERE nickname= #{value}
   </select>
   
   <select id="mailCheck" resultType="member">
    SELECT
   		 user_No as userNo,
         user_Id as userId,
         user_Pwd as userPwd,
         user_Name as userName,
         user_Email as userEmail,
         gender as gender,
         nickname as nickname,
         enroll_Date as enrollDate,
         roll as roll,
         end_YN as endYN
   		from
   		 MEMBER
   		WHERE user_Email= #{value}
   </select>
   
   <select id="findPwd" parameterType="hashmap" resultType="member">
   SELECT
   		 user_No as userNo,
         user_Id as userId,
         user_Pwd as userPwd,
         user_Name as userName,
         user_Email as userEmail,
         gender as gender,
         nickname as nickname,
         enroll_Date as enrollDate,
         roll as roll,
         end_YN as endYN
   		from
   		 MEMBER
   		WHERE user_name= #{userName} and user_email=#{userEmail}
   </select>
   
    <update id="findNewPwd" parameterType="hashmap">
    UPDATE
         MEMBER
      SET
         user_Pwd = #{num}
      WHERE
         user_id = #{userId} AND USER_EMAIL = #{userEmail}
    </update>
    
    <select id="findMemberPwd" parameterType="hashmap" resultType="member">
    	SELECT
   		 user_No as userNo,
         user_Id as userId,
         user_Pwd as userPwd,
         user_Name as userName,
         user_Email as userEmail,
         gender as gender,
         nickname as nickname,
         enroll_Date as enrollDate,
         roll as roll,
         end_YN as endYN
   		from
   		 MEMBER
   		WHERE USER_ID= #{userId} AND USER_EMAIL = #{userEmail}
    </select>
</mapper>
