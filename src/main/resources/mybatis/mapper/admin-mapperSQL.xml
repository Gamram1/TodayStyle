<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="admin">

	<!-- main SQL -->
	<select id="selectCountTodayNewMember" resultType="int">
		SELECT COUNT(*) FROM (
		SELECT *
		FROM MEMBER 
		WHERE TO_CHAR(ENROLL_DATE,'YYMMDD')=TO_CHAR(SYSDATE,'YYMMDD'))
		GROUP BY ENROLL_DATE
	</select>
	
	<select id="selectCountTodayNewCoordiPost" resultType="int">
		SELECT COUNT(*) FROM(
		SELECT * FROM COORDI 
		WHERE TO_CHAR(REG_DATE,'YYMMDD')=TO_CHAR(SYSDATE,'YYMMDD'))
		GROUP BY REG_DATE
	</select>
	
	<select id="selectCountTodayNewIttemPost" resultType="int">
		SELECT COUNT(*) FROM(
		SELECT * FROM IT_ITEM 
		WHERE TO_CHAR(REG_DATE,'YYMMDD')=TO_CHAR(SYSDATE,'YYMMDD'))
		GROUP BY REG_DATE
	</select>
	
	<!-- Member -->
	<!-- 리스트 페이징 처리 -->
	<select id="selectAllMemberListPage" parameterType="hashmap" resultType="member">
		SELECT
			user_No as userNo,
			user_Id as userId,
			user_Pwd as userPwd,
			user_Name as userName,
			user_Email as userEmail,
			gender as gender,
			nickname as nickname,
			enroll_Date as enrollDate,
			roll as roll,
			end_YN as endYN
		FROM (SELECT ROW_NUMBER() OVER(ORDER BY USER_NO ASC) AS NUM, MEMBER.* FROM MEMBER)
		WHERE NUM BETWEEN #{start} AND #{end}
	</select>
	
	<select id="selectMemberTotalCount" resultType="int">
		SELECT COUNT(*) FROM MEMBER
	</select>
	
	<update id="updateMemberOneEndYNChange" parameterType="hashmap">
		UPDATE MEMBER SET END_YN=#{endYN} WHERE USER_ID=#{userId}
	</update>
	
</mapper>
